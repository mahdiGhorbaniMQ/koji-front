<div class="event-container">
    <div class="event">
        <div class="detail-container">
            <button class="btn btn-back-container bg-dark text-white rounded-pill h6" (click)="back()">
                >
            </button>
            <p class="text-center h2">{{selectedEvent.title}}</p>
            <p class="text-center h4">{{selectedEvent.desceriptions}}</p>
        </div>
        <div class="body-container">
            <div class="selecting-bar">
                <div 
                    class="selecting-item"
                    [ngClass]="{'selected':selectedItem=='user'}"
                    (click)="selectedItem='user'"
                >
                    شرایط شما
                </div>
                <div
                    class="selecting-item"
                    [ngClass]="{'selected':selectedItem=='all'}"
                    (click)="selectedItem='all'"
                >
                    شرایط بقیه افراد
                </div>
                <div
                    class="selecting-item"
                    [ngClass]="{'selected':selectedItem=='final'}"
                    (click)="selectedItem='final'"    
                >
                    شرایط نهایی
                </div>
            </div>
            <div class="conditions-container" >
                <div
                    dir="rtl"
                    *ngIf="selectedItem=='user'"
                    class="user-conditions">
                    <h1>شرایط شما</h1>
                    <hr>
                    <form (ngSubmit)="setUserConditions()">
                        <div *ngIf="state==1">
                            <div class="mb-3">
                                <label for="place" class="h5">مکان هایی که میتوانید را اضافه کنید</label><br>
                                <input 
                                    style="width: 100%; height: 40px;" 
                                    type="text" placeholder="نام مکان" 
                                    name="place" id="place"
                                    [(ngModel)]="placeInput"
                                    >
                                <button class="btn btn-danger" (click)="addPlace()">افزودن</button>
                                <br><br>
                                <div class="places-container">
                                    <div class="place-item bg-success" *ngFor="let place of places;let i=index">
                                        <button class="btn btn-danger mr-3" (click)="deletePlace(i)">x</button>
                                        <span class="p-3 text-white">{{place}}</span>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class="mb-3">
                                <label for="date" class="h5">تاریخ هایی که میتوانید را اضافه کنید</label><br>
                                <input 
                                     style="width: 100%; text-align: center; height: 40px;" 
                                     type="datetime-local" 
                                     name="date" id="date" 
                                     [(ngModel)]="dateInput">
                                <button class="btn btn-danger" (click)="addDate()">افزودن</button>
                                     
                                <br><br>
                                <div class="dates-container">
                                    <div class="dates-item bg-success" *ngFor="let date of dates;let i=index">
                                        <button class="btn btn-danger mr-3" (click)="deleteDate(i)">x</button>
                                        <span class="p-3 text-white">{{date}}</span>
                                    </div>
                                </div>
                            </div>
                            <hr>
                        </div>
                        <div class="mb-3 h5">
                            <input type="radio" value="1" name="state" id="state1" [(ngModel)]="state" checked>
                            <label for="state1">فقط با شرایط بالا هستم</label><br>
                            <input type="radio" value="2" name="state" id="state2" [(ngModel)]="state">
                            <label for="state2">همه جوره هستم</label><br>
                            <input type="radio" value="3" name="state" id="state3" [(ngModel)]="state">
                            <label for="state3">کلا نیستم</label><br>
                        </div>
                        <hr>
                        <button type="submit" class="submit btn btn-danger">ثبت شرایط</button>
                    </form>
                </div>
                <div
                    dir="rtl"
                    *ngIf="selectedItem=='all'"
                    class="all-conditions h5"
                >
                    <div *ngFor="let conditions of selectedEvent.conditions | keyvalue">
                        {{conditions.key}}: 
                        <br>
                        {{conditions.value.placeName[0]}}
                        <br>
                        {{conditions.value.localDate[0]}}
                        <hr>
                    </div>
                </div>
                <div
                    dir="rtl"
                    *ngIf="selectedItem=='final'"
                    class="final-conditions text-center h2"
                >
                {{selectedEvent.finalConditions!.placeName}}
                <hr>
                {{selectedEvent.finalConditions!.localDate}}
                <hr>
                </div>
            </div>
        </div> 
    </div>
</div>
